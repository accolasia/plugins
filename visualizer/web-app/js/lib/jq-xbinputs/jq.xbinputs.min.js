/* jq-xbinput - v0.1.0 - 2013-02-28 */
var com=com||{};com.tniswong=com.tniswong||{},com.tniswong.jq=com.tniswong.jq||{},function(e,t,n){com.tniswong.jq.xbinputs={pluginName:"xbinputs",defaultConfig:{xbinputClass:"xb-input",xbinputTextClass:"xb-text",xbinputRadioClass:"xb-radio",xbinputTextAreaClass:"xb-textarea",xbinputCheckboxClass:"xb-checkbox",xbinputCheckedClass:"xb-checked",xbinputDisabledClass:"xb-disabled",xbinputIndicatorClass:"xb-checked-indicator",xbinputIdPrefix:"xb-input-",xbinputRadioGroupPrefix:"xb-radio-",xbinputPlaceholderLabelClass:"xb-placeholder",xbinputErrorClass:"xb-error",_xbinputType:{TEXT:"TEXT",TEL:"TEL",EMAIL:"EMAIL",PASSWORD:"PASSWORD",TEXTAREA:"TEXTAREA",CHECKBOX:"CHECKBOX",RADIO:"RADIO",UNSUPPORTED:"UNSUPPORTED"}},methods:{init:function(){var e=this;e._isSupported()&&(this._replaceOriginalElement(),this._bindEvents(),this._modernize())},enable:function(){},disable:function(){},checked:function(e){var t=this;return e.is(":checked")||e.hasClass(t.config.xbinputCheckedClass)},disabled:function(e){var t=this;return e.is(":disabled")||e.hasClass(t.config.xbinputDisabledClass)},error:function(e){var t=this;e?t.$elem.addClass(t.config.xbinputErrorClass):t.$elem.removeClass(t.config.xbinputErrorClass)},_isSupported:function(){var e=this,t=e._fetchInputType(e.$elem);return t&&!(e.config._xbinputType.UNSUPPORTED===t)},_replaceOriginalElement:function(){var t=this,n=t._buildTemplate(t.$elem);e(t.$elem).replaceWith(function(){return n}),t.$elem=n},_bindEvents:function(){var n=this;n.config.eventsBound||(e("label").click(function(){}),e(t).on("focus","."+n.config.xbinputClass,function(t){var n=e(t.currentTarget);t.isPropagationStopped()||n.trigger("xb-input-focus")}),e(t).on("focus","."+n.config.xbinputClass+" input, ."+n.config.xbinputClass+" textarea",function(t){var i=e(t.currentTarget);i.parents("."+n.config.xbinputClass).find("input, textarea").css("outline","none"),i.parents("."+n.config.xbinputClass).css({outline:"rgb(94, 158, 215) auto 5px"}),t.stopPropagation()}),e(t).on("click","."+n.config.xbinputClass,function(t){var i=e(t.currentTarget);switch(n._fetchInputType(i)){case n.config._xbinputType.RADIO:case n.config._xbinputType.CHECKBOX:t.preventDefault(),i.trigger("xb-input-change");break;default:}}),e(t).on("keyup","."+n.config.xbinputClass,function(t){var i=e(t.currentTarget);switch(n._fetchInputType(i)){case n.config._xbinputType.RADIO:case n.config._xbinputType.CHECKBOX:32==t.keyCode&&i.trigger("xb-input-change");break;case n.config._xbinputType.TEXTAREA:case n.config._xbinputType.PASSWORD:case n.config._xbinputType.TEXT:case n.config._xbinputType.EMAIL:case n.config._xbinputType.TEL:""!=i.find("input, textarea").val()&&i.find("."+n.config.xbinputPlaceholderLabelClass).fadeOut();break;default:}}),e(t).on("click","label",function(t){var i=e(t.currentTarget),a=e("#"+i.attr("for"));if(a&&a.attr("id")==i.attr("for"))switch(n._fetchInputType(a)){case n.config._xbinputType.RADIO:case n.config._xbinputType.CHECKBOX:t.preventDefault(),a.trigger("xb-input-change");break;case n.config._xbinputType.TEXTAREA:case n.config._xbinputType.PASSWORD:case n.config._xbinputType.TEXT:case n.config._xbinputType.EMAIL:case n.config._xbinputType.TEL:t.preventDefault(),a.trigger("xb-input-focus");break;default:}}),e(t).on("xb-input-change","."+n.config.xbinputClass,function(t){var i=e(t.currentTarget);switch(n._fetchInputType(i)){case n.config._xbinputType.RADIO:n._toggleRadio(i);break;case n.config._xbinputType.CHECKBOX:n._toggleCheckbox(i);break;default:}}),e(t).on("xb-input-focus","."+n.config.xbinputClass,function(t){var i=e(t.currentTarget);switch(n._fetchInputType(i)){case n.config._xbinputType.TEXTAREA:case n.config._xbinputType.PASSWORD:case n.config._xbinputType.TEXT:case n.config._xbinputType.EMAIL:case n.config._xbinputType.TEL:i.find("input, textarea").focus()}}),e(t).on("blur","."+n.config.xbinputClass,function(t){var i=e(t.currentTarget);switch(n._fetchInputType(i)){case n.config._xbinputType.TEXTAREA:case n.config._xbinputType.PASSWORD:case n.config._xbinputType.TEXT:case n.config._xbinputType.EMAIL:case n.config._xbinputType.TEL:i.css({outline:"none"}),""==i.find("input, textarea").val()&&i.find("."+n.config.xbinputPlaceholderLabelClass).fadeIn()}}),n.config.eventsBound=!0)},_modernize:function(){e(function(){!Modernizr||Modernizr.borderradius&&Modernizr.cssgradients||n.PIE&&e(".xb-input").each(function(){PIE.attach(this)})})},_buildTemplate:function(t){var n=this,i=null,a=n._fetchInputType(t);switch(a){case n.config._xbinputType.TEXT:case n.config._xbinputType.PASSWORD:case n.config._xbinputType.TEXTAREA:case n.config._xbinputType.EMAIL:case n.config._xbinputType.TEL:i=n._buildTextTemplate(t);break;case n.config._xbinputType.CHECKBOX:i=n._buildCheckboxTemplate(t);break;case n.config._xbinputType.RADIO:i=n._buildRadioTemplate(t);break;case n.config._xbinputType.UNSUPPORTED:default:}return t.attr("id")&&i.attr("id",t.attr("id")),i&&i.data("inputType",a),e.each(t.data(),function(e,t){i.data(e,t)}),i},_buildTextTemplate:function(t){var n,i=this,a=e("<div></div>"),c=i._fetch$InputElement(t),p=t.attr("title");return i._addClassesToTemplate(a,t),a.append(c),a.data("$inputElement",c),p&&(n=i._fetchPlaceholder(a,p),a.prepend(n),""!=c.val()&&n.hide()),a},_buildCheckboxTemplate:function(t){var n=this,i=e('<a href="#"></a>');n._addClassesToTemplate(i,t),n._copyTabIndexToTemplate(i,t),n._addCheckedIndicatorToTemplate(i);var a=n._fetch$InputElement(t);return i.data("$inputElement",a),!n.disabled(t)&&n.checked(t)&&i.append(a),i},_buildRadioTemplate:function(t){var n=this,i=e('<a href="#"></a>');n._addClassesToTemplate(i,t),n._copyTabIndexToTemplate(i,t),n._addCheckedIndicatorToTemplate(i);var a=n._fetch$InputElement(t);i.data("$inputElement",a),!n.disabled(t)&&n.checked(t)&&i.append(a);var c=n._fetchRadioGroup(t);return i.data("radioGroup",c),i},_addClassesToTemplate:function(t,n){var i=this,a=i._fetchClassList(n);n.attr("class")&&t.attr("class",n.attr("class")),e.each(a,function(e,n){t.addClass(n)})},_copyTabIndexToTemplate:function(e,t){t.attr("tabindex")&&e.attr("tabindex",t.attr("tabindex"))},_addCheckedIndicatorToTemplate:function(t){var n=this,i=e("<span>&nbsp</span>");i.addClass(n.config.xbinputIndicatorClass),t.append(i)},_fetch$InputElement:function(t){var n,i=this;switch(i._fetchInputType(t)){case i.config._xbinputType.RADIO:case i.config._xbinputType.CHECKBOX:n=e('<input type="hidden">'),n.attr("value",t.attr("value")),n.attr("name",t.attr("name"));break;default:n=t.clone(),n.removeAttr("id"),n.removeAttr("class")}return t.attr("id")?n.attr("id",i.config.xbinputIdPrefix+t.attr("id")):n.attr("id",i.config.xbinputIdPrefix+(new Date).getTime()),n},_fetchRadioGroup:function(e){var t=this;return t.config.xbinputRadioGroupPrefix+e.attr("name")},_fetchClassList:function(e){var t=this,n=[].concat(t.config.xbinputClass);switch(t.checked(e)&&(n=n.concat(t.config.xbinputCheckedClass)),t.disabled(e)&&(n=n.concat(t.config.xbinputDisabledClass)),t._fetchInputType(e)){case t.config._xbinputType.TEXT:case t.config._xbinputType.PASSWORD:case t.config._xbinputType.EMAIL:case t.config._xbinputType.TEL:n=n.concat(t.config.xbinputTextClass);break;case t.config._xbinputType.TEXTAREA:n=n.concat(t.config.xbinputTextAreaClass);break;case t.config._xbinputType.RADIO:n=n.concat(t.config.xbinputRadioClass,t._fetchRadioGroup(e));break;case t.config._xbinputType.CHECKBOX:n=n.concat(t.config.xbinputCheckboxClass);break;default:}return n},_fetchInputType:function(t){var n=this,i=t.data("inputType");if(i)return i;if(t.is("input")){var a=t.attr("type"),c=n.config._xbinputType.UNSUPPORTED;return e.each(n.config._xbinputType,function(e,t){a.toUpperCase()===t&&(c=t)}),c}return t.is("textarea")?n.config._xbinputType.TEXTAREA:n.config._xbinputType.UNSUPPORTED},_toggleCheckbox:function(e){var t=this;if(!t.disabled(e))if(e.toggleClass(t.config.xbinputCheckedClass),t.checked(e)){var n=e.data("$inputElement");e.append(n)}else e.find('input[type="hidden"]').remove()},_toggleRadio:function(t){var n=this;if(!n.checked(t)&&!n.disabled(t)){var i=t.data("radioGroup");e("."+i).removeClass(n.config.xbinputCheckedClass),e("."+i).find('input[type="hidden"]').remove(),t.addClass(n.config.xbinputCheckedClass);var a=t.data("$inputElement");t.append(a)}},_fetchPlaceholder:function(t,n){var i=this,a=e("<label>"+n+"</label>");return a.addClass(i.config.xbinputPlaceholderLabelClass),a.attr("for",t.find("input, textarea").attr("id")),a}}},e.createPlugin(com.tniswong.jq.xbinputs)}(jQuery,document,window);